{if uploads}
<script type="text/javascript">
function update_destination(obj)
{
	if (document.getElementById('new_filename'))
	{
		var name   = obj.value;
		var path_x = name.lastIndexOf('\/');
		var path_y = name.lastIndexOf('\\');
		if (path_x != -1)
		{
			name = name.substring(path_x+1);
		}
		else if (path_y != -1)
		{
			name = name.substring(path_y+1);
		}
		document.getElementById('new_filename').value = name.replace(/ /g, '_');
	}
}
</script>
{if can_edit}
{form_declaration:wiki:uploads}
	<div class="well">
		<div class="form-horizontal">
			<div class="form-group">
				<label for="file" class="col-sm-2 control-label">Choose File</label>
				<div class="col-sm-10">
					<input id="file" type="file" name="userfile" size="20" onchange='update_destination(this)'>
					{if file_types == 'images'}<span class="help-block">Only Image Uploads Are Allowed</span>
					{if:else}<span class="help-block">Allowed File Types:</div> {file_types}</span>{/if}
				</div>
			</div>
			<div class="form-group">
				<label for="new_filename" class="col-sm-2 control-label">New Filename</label>
				<div class="col-sm-10">
					<input class="form-control" name="new_filename" id="new_filename" type="text" maxlength="80">
				</div>
			</div>
			<div class="form-group">
				<label for="summary" class="col-sm-2 control-label">Summary</label>
				<div class="col-sm-10">
					<textarea name='summary' id='summary' rows='10' class='form-control'></textarea>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-10 col-sm-offset-2">
					<button name="submit" class="btn btn-default" type="submit" value="Submit">Submit</button>
				</div>
			</div>
		</div>
	</div>
</form>
{/if}

{if cannot_edit}
<div class="alert alert-danger">
	<p>>You are not allowed to upload images.</p>
</div>
{/if}
{if:else}
<div class="alert alert-danger">
	<p>File Uploading is not allowed for this wiki.</p>
</div>
{/if}